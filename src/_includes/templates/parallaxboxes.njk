<!-- parallaxboxes.njk -->
<div id="parallaxboxes" class="interior-parallax pbr-120 color-dark">
  <div class="boxparallax1">
    <div class="boxparallax1-content">
      <img width="100%" src="/assets/static/images/aaaa.png" alt="parallax1">
    </div>
  </div>
  <div class="boxparallax2">
    <div class="boxparallax2-content">
      <img width="100%" src="/assets/static/images/bbb.png" alt="parallax2">
    </div>
  </div>
  <div class="boxparallax3">
    <div class="boxparallax3-content">
      <img width="100%" src="/assets/static/images/ccc.png" alt="parallax3">
    </div>
  </div>
</div>
<div id="textAppear2" class="container-3 pbr-120">
  <div class="row">
    <div class="col-xs-12 inview text-center">
      <div class="fluid-4-b js-appearText2">Lorem ipsum dolor sit amet consectetur, adipisicing elit. </div>
    </div>
  </div>
</div>
<div class="container pbr-120 inview">
  <div class="row">
    <div class="col-xs-12 text-center">
      <div class="fade-opacity">
        <svg width="192" height="47" viewBox="0 0 192 47" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M109.462 29.2216V31.6058L109.47 35.1388C109.473 36.6709 110.722 37.9113 112.262 37.9113C113.804 37.9113 115.055 36.6674 115.055 35.133V29.2216"
            fill="#333333" />
          <path
            d="M115.055 31.1925V25.4607L115.048 21.9277C115.044 20.3955 113.795 19.1552 112.255 19.1552C110.713 19.1552 109.462 20.399 109.462 21.9334L109.462 31.1925"
            fill="#333333" />
          <path
            d="M112.211 16.8153C113.967 16.8153 115.392 15.3985 115.392 13.6507C115.392 11.903 113.967 10.4861 112.211 10.4861C110.454 10.4861 109.03 11.903 109.03 13.6507C109.03 15.3985 110.454 16.8153 112.211 16.8153Z"
            fill="#333333" />
          <path
            d="M166.015 14.6833C164.308 13.6618 162.345 13.1502 160.125 13.1502C157.839 13.1502 155.76 13.6943 153.888 14.7822C152.016 15.8698 150.533 17.3456 149.44 19.2074C148.346 21.0703 147.8 23.1716 147.8 25.5119C147.8 27.8528 148.354 29.9619 149.465 31.8409C150.574 33.7199 152.082 35.1955 153.987 36.2664C155.892 37.3379 158.038 37.8734 160.424 37.8734C162.279 37.8734 164.035 37.5271 165.692 36.835C166.645 36.4365 167.516 35.9292 168.304 35.3127C169.247 34.5761 169.341 33.1887 168.5 32.3398C167.46 31.2903 165.847 31.0558 164.55 31.7689C164.303 31.9048 164.046 32.0276 163.778 32.1374C162.735 32.5662 161.599 32.7804 160.374 32.7804C158.949 32.7804 157.69 32.4759 156.597 31.8656C155.503 31.256 154.658 30.3909 154.062 29.2697C153.825 28.8254 153.639 28.3507 153.498 27.8488C153.454 27.6939 153.576 27.5391 153.737 27.5391L169.905 27.5391C170.683 27.5391 171.338 26.9603 171.43 26.1916L171.432 26.1794C171.482 25.7676 171.507 25.3636 171.507 24.9679C171.507 22.6932 171.017 20.666 170.041 18.8859C169.063 17.1061 167.721 15.7053 166.015 14.6833ZM154.012 21.5316C154.575 20.4606 155.37 19.6276 156.398 19.0343C157.424 18.441 158.634 18.1443 160.026 18.1443C161.351 18.1443 162.469 18.4085 163.381 18.9354C164.292 19.4633 164.996 20.2211 165.493 21.2101C165.73 21.6808 165.912 22.2094 166.049 22.7862C166.086 22.9393 165.965 23.0888 165.807 23.0888H153.759C153.597 23.0888 153.476 22.9336 153.52 22.7786C153.648 22.3365 153.809 21.9185 154.012 21.5316Z"
            fill="#333333" />
          <path
            d="M188.795 24.6631C187.851 24.1193 186.858 23.6913 185.814 23.3779C184.771 23.0652 183.777 22.7771 182.833 22.5128C181.889 22.2494 181.119 21.9368 180.523 21.5739C179.927 21.2115 179.629 20.701 179.629 20.0413C179.629 19.4161 179.927 18.9379 180.523 18.608C181.119 18.279 181.964 18.1137 183.057 18.1137C184.216 18.1137 185.243 18.3285 186.137 18.7561C186.287 18.8277 186.433 18.9052 186.577 18.9886C187.91 19.7631 189.583 19.629 190.674 18.5427C191.482 17.7395 191.44 16.4245 190.586 15.67C189.902 15.065 189.139 14.5696 188.298 14.1841C186.824 13.5091 185.127 13.1707 183.206 13.1707C181.384 13.1707 179.819 13.4675 178.511 14.0605C177.202 14.6538 176.192 15.4941 175.48 16.5814C174.768 17.6688 174.412 18.9709 174.412 20.4862C174.412 21.9034 174.71 23.0566 175.306 23.9464C175.903 24.8362 176.673 25.5364 177.617 26.0472C178.561 26.5582 179.554 26.9617 180.598 27.2579C181.641 27.5547 182.635 27.8434 183.579 28.123C184.523 28.4034 185.293 28.741 185.889 29.1361C186.485 29.5318 186.783 30.0923 186.783 30.8168C186.783 31.5087 186.468 32.0364 185.839 32.3988C185.21 32.7617 184.282 32.9423 183.057 32.9423C181.698 32.9423 180.481 32.7039 179.405 32.2256C179.098 32.0893 178.8 31.9334 178.513 31.7579C177.204 30.9585 175.531 31.0881 174.445 32.1686L174.424 32.1893C173.623 32.9853 173.68 34.2973 174.55 35.0166C174.929 35.3294 175.33 35.6183 175.754 35.8834C176.78 36.5261 177.906 37.0202 179.132 37.3664C180.357 37.7121 181.633 37.8853 182.957 37.8853C185.74 37.8853 187.942 37.2103 189.565 35.8587C191.188 34.5079 192 32.6789 192 30.3722C192 28.9224 191.702 27.7445 191.106 26.8378C190.509 25.9321 189.739 25.2069 188.795 24.6631Z"
            fill="#333333" />
          <path
            d="M42.1434 1.69821C38.1765 -0.581819 33.2133 -0.564887 29.1906 1.74252C27.7494 2.56929 27.2548 4.40196 28.0856 5.83578C28.9169 7.26981 30.7592 7.76169 32.1999 6.93514C34.3974 5.67461 36.9881 5.65684 39.1294 6.88789C41.7485 8.39342 43.191 11.4212 43.191 15.4135C43.191 19.9303 40.9936 27.5754 30.5255 38.3479C27.1491 41.8226 21.5423 41.9065 18.0271 38.5361C12.5516 33.2862 6.0245 25.223 6.0245 16.6249V14.8656C6.0245 12.619 7.89161 10.7911 10.1865 10.7911C12.4814 10.7911 14.3485 12.619 14.3485 14.8656V21.6191C14.3485 27.247 18.9508 31.8256 24.6078 31.8256C26.3347 31.8256 27.9638 31.3985 29.3934 30.6456C29.9389 31.4132 30.8378 31.914 31.8545 31.914C33.5182 31.914 34.8668 30.5724 34.8668 28.9172V15.6108C34.8668 13.9558 33.5182 12.614 31.8545 12.614C30.1908 12.614 28.8423 13.9558 28.8423 15.6108V21.6191C28.8423 23.942 26.9426 25.8319 24.6078 25.8319C22.2727 25.8319 20.373 23.942 20.373 21.6191V14.8656C20.373 9.31404 15.8034 4.79747 10.1865 4.79747C4.56965 4.79747 0 9.31404 0 14.8656V17.7044C0 17.9203 0.0240585 18.1306 0.067763 18.3336C0.807693 28.3327 7.86829 37.1198 13.8466 42.852C16.7357 45.622 20.4678 47 24.1921 47C28.0783 46.9998 31.9558 45.4993 34.8569 42.5139C41.4073 35.773 49.2155 25.5997 49.2155 15.4135C49.2155 9.28059 46.6378 4.28155 42.1434 1.69821Z"
            fill="#333333" fill-opacity="0.988235" />
          <path
            d="M73.2611 23.6357V31.5694L73.2684 35.1024C73.2716 36.6346 74.521 37.8749 76.061 37.8749C77.6033 37.8749 78.8535 36.6311 78.8535 35.0967V23.6357"
            fill="#333333" />
          <path
            d="M89.1485 27.4041V19.4705L89.1411 15.9374C89.1379 14.4053 87.8886 13.1649 86.3486 13.1649C84.8063 13.1649 83.556 14.4088 83.556 15.9432V27.4041"
            fill="#333333" />
          <path
            d="M76.0638 13.1649C74.523 13.1649 73.2739 14.4075 73.2739 15.9405V26.9867C73.2739 28.1646 73.0798 29.165 72.6904 29.9889C72.3022 30.8137 71.7269 31.4446 70.9662 31.8812C70.2052 32.3191 69.3007 32.5377 68.2522 32.5377C67.2037 32.5377 66.2992 32.3191 65.5383 31.8812C64.7776 31.4446 64.2022 30.8137 63.814 29.9889C63.4247 29.165 63.2306 28.1646 63.2306 26.9867V15.9405C63.2306 14.4075 61.9815 13.1649 60.4407 13.1649C58.8999 13.1649 57.651 14.4075 57.651 15.9405V27.239C57.651 29.3251 58.0987 31.1668 58.9951 32.7647C59.8907 34.3629 61.1422 35.6159 62.7486 36.5241C64.3545 37.4324 66.1891 37.8868 68.2522 37.8868C70.3154 37.8868 72.15 37.4324 73.7559 36.5241C75.3623 35.6159 76.6138 34.3629 77.5094 32.7647C78.4058 31.1668 78.8536 29.3251 78.8536 27.239V15.9405C78.8536 14.4075 77.6046 13.1649 76.0638 13.1649Z"
            fill="#333333" />
          <path
            d="M86.3458 37.8869C87.8866 37.8869 89.1357 36.6442 89.1357 35.1113V24.0651C89.1357 22.8872 89.3298 21.8867 89.7191 21.0628C90.1074 20.238 90.6827 19.6071 91.4433 19.1705C92.2044 18.7327 93.1089 18.5141 94.1574 18.5141C95.2059 18.5141 96.1104 18.7327 96.8713 19.1705C97.6319 19.6071 98.2074 20.238 98.5956 21.0628C98.9848 21.8867 99.179 22.8872 99.179 24.0651V35.1113C99.179 36.6442 100.428 37.8869 101.969 37.8869C103.51 37.8869 104.759 36.6442 104.759 35.1113V23.8127C104.759 21.7267 104.311 19.8849 103.414 18.287C102.519 16.6889 101.267 15.4358 99.661 14.5277C98.055 13.6193 96.2204 13.1649 94.1574 13.1649C92.0942 13.1649 90.2596 13.6193 88.6537 14.5277C87.0472 15.4358 85.7958 16.6889 84.9002 18.287C84.0038 19.8849 83.5559 21.7267 83.5559 23.8127V35.1113C83.5559 36.6442 84.805 37.8869 86.3458 37.8869Z"
            fill="#333333" />
          <path
            d="M153.763 46.9328C140.316 46.9328 134.077 34.257 132.303 27.7315C131.935 26.3753 132.954 25.9085 134.317 25.5418C135.677 25.1761 136.868 25.0455 137.238 26.3989C137.414 27.0331 141.036 42.3555 154.453 41.8317C155.877 41.7768 157.053 42.8701 157.108 44.2738C157.163 45.6776 156.064 46.8602 154.653 46.9153C154.353 46.927 154.056 46.9328 153.763 46.9328Z"
            fill="#333333" />
          <path
            d="M124.874 37.8647C123.368 37.8647 122.146 36.6496 122.146 35.1508V28.6672H120.125C118.618 28.6672 117.397 27.4522 117.397 25.9534C117.397 24.4546 118.618 23.2396 120.125 23.2396H122.146V17.227C122.146 13.5101 125.186 10.4862 128.922 10.4862H135.654C139.598 10.4929 145.458 12.9734 145.458 19.7794C145.458 22.2845 144.609 24.4319 143.002 25.9896C140.281 28.628 136.384 28.6758 135.759 28.6672H127.602V35.1508C127.602 36.6496 126.381 37.8647 124.874 37.8647ZM127.602 23.2396L135.855 23.2404C136.434 23.2478 138.232 23.0509 139.209 22.0887C139.742 21.5627 140.002 20.8073 140.002 19.7794C140.002 16.264 136.655 15.9317 135.629 15.9137L128.922 15.9138C128.194 15.9138 127.602 16.5029 127.602 17.227V23.2396Z"
            fill="#333333" />
        </svg>
      </div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('scroll', () => {
    const parallaxSection = document.getElementById('parallaxboxes');
    if (!parallaxSection) return;
    const rect = parallaxSection.getBoundingClientRect();
    if (rect.top >= window.innerHeight || rect.bottom < 0) return;
    const parallaxBoxes = document.querySelectorAll('#parallaxboxes > div');
    const scrollPosition = 150;
    parallaxBoxes.forEach((box, index) => {
      const speed = 0.2; // Reducir la velocidad del efecto parallax
      const offset = (rect.top - scrollPosition) * speed * (index + 1);
      box.style.transform = `translateY(${offset}px)`;
    });
  });
</script>
<script type="module">
  // Registrar el plugin
  gsap.registerPlugin(SplitText);
  export function initAppearText() {
    const targets = document.querySelectorAll('.js-appearText2');
    if (!targets.length) return;
    targets.forEach(el => {
      // 1. Separar palabras
      const split = new SplitText(el, { type: 'words' });
      // 2. Crear timeline (pausado)
      const tl = gsap.timeline({ paused: true })
        .from(split.words, {
          duration: 0.6,
          opacity: 0.1,
          ease: 'power2.out',
          stagger: 0.2
        });
      // 3. Medidas de la sección
      const section = document.getElementById('textAppear2') || document.body;
      const sectionHeight = section.offsetHeight;
      const update = () => {
        const rect = section.getBoundingClientRect();
        const visible = window.innerHeight - rect.top;
        const progress = Math.min(1, Math.max(0, (visible - window.innerHeight * 0.2) / sectionHeight));
        tl.progress(progress);
      };
      // 4. Sincronizar con Lenis o scroll nativo
      if (window.lenis && typeof window.lenis.on === 'function') {
        window.lenis.on('scroll', update);
      } else {
        window.addEventListener('scroll', update, { passive: true });
      }
      // Ejecutar al inicio por si ya está en vista
      update();
    });
  }
  // Bootstrap: crear Lenis si no existe
  document.addEventListener('DOMContentLoaded', () => {
    if (!window.lenis) {
      window.lenis = new Lenis({
        smooth: true,
        lerp: 0.1
      });
      const raf = time => {
        window.lenis.raf(time);
        requestAnimationFrame(raf);
      };
      requestAnimationFrame(raf);
    }
    initAppearText();
  });
</script>